{% extends "base.html" %}
{% from "macros.jinja" import print_flash_messages %}
{% block body %}

<div id="wrapper">

  <!-- Sidebar -->
  <nav class="navbar navbar-fixed-top" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
     <a class="navbar-brand" href="{{ url_for('index') }}">Orchestrator</a>
      <ul class="nav navbar-top-links navbar-right">
      <button type="button" class="navbar-toggle navbar-fixed-top" data-toggle="collapse" data-target=".navbar-ex1-collapse">

        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      </ul>
    </div>


      <ul class="nav navbar-top-links navbar-right">
        <li class="dropdown messages-dropdown">

        <li class="dropdown user-dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> {{ session['username'] }} <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="{{ url_for('logout') }}"><i class="fa fa-power-off"></i> Log Out</a></li>
          </ul>
        </li>
      </ul>

    <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="navbar-default sidebar" role="navigation">
        <div class="sidebar-nav navbar-collapse">
        <ul class="nav" id="side-menu">
        <li class="active"><a href="{{ url_for('index') }}"><i class="fa fa-dashboard fa-fw"></i> Dashboard</a></li>

        <li>
            <a href="javascript:;" data-toggle="collapse" data-target="#minions-ul" class="" aria-expanded="true"><i class="fa fa-sitemap fa-fw"></i> Nodes <i class="fa fa-fw fa-caret-down"></i></a>
            <ul class="nav nav-second-level" id="minions-ul">
              <li><a href="{{ url_for('minions_status') }}"><i class="fa fa-check-square fa-fw fa-lg"></i> Nodes sync status</a></li>
              <li><a href="{{ url_for('minions_deployments') }}"><i class="fa fa-rocket fa-fw fa-lg"></i> Nodes deployments</a></li>
              <li><a href="{{ url_for('wip') }}"><i class="fa fa-plus-square fa-fw fa-lg"></i> HealthChecks</a></li>
              <li><a href="{{ url_for('minions_keys') }}"><i class="fa fa-key fa-fw fa-lg"></i> Nodes keys</a></li>
            </ul>
        </li>

        <li>
            <a href="javascript:;" data-toggle="collapse" data-target="#jobs-ul" class="" aria-expanded="true"><i class="fa fa-file-o fa-fw"></i> Jobs <i class="fa fa-fw fa-caret-down"></i></a>
            <ul class="nav nav-second-level" id="jobs-ul">
              <li><a href="{{ url_for('templates') }}"><i class="fa fa-magic fa-fw fa-lg"></i> Templates</a></li>
              <li><a href="{{ url_for('jobs') }}"><i class="fa fa-history fa-fw fa-lg"></i> Jobs history</a></li>
              <li><a href="{{ url_for('wip') }}"><i class="fa fa-retweet fa-fw fa-lg"></i> Scheduled Jobs</a></li>
            </ul>
        </li>


        <li>
            <a href="javascript:;" data-toggle="collapse" data-target="#execute-ul" class="" aria-expanded="true"><i class="fa fa-rub fa-fw"></i> Execute <i class="fa fa-fw fa-caret-down"></i></a>
            <ul class="nav nav-second-level" id="execute-ul">
              <li><a href="{{ url_for('run') }}"><i class="fa fa-terminal fa-fw fa-lg"></i> Run module</a></li>
              <li><a href="{{ url_for('wip') }}"><i class="fa fa-list-alt fa-fw fa-lg"></i> Inventory / Reporting</a></li>
            </ul>
        </li>

        <li>
            <a href="javascript:;" data-toggle="collapse" data-target="#debug-ul" class="" aria-expanded="true"><i class="fa fa-wrench fa-fw"></i> Debug <i class="fa fa-fw fa-caret-down"></i></a>
            <ul class="nav nav-second-level" id="debug-ul">
              <li>
                <a href="{{ url_for('debug') }}">
                  <i class="fa fa-bar-chart-o fa-fw"></i> Debug Nodes
                </a>
              </li>
            </ul>
        </li>

        <li>
          <a href="javascript:;" data-toggle="collapse" data-target="#topo-ul" class="" aria-expanded="true"><i class="fa fa-sitemap fa-fw"></i> Topo <i class="fa fa-fw fa-caret-down"></i></a>
          <ul class="nav nav-second-level" id="topo-ul">
            <li>
              <a href="{{ url_for('traffic_path') }}">
                <i class="fa fa-check-square fa-fw fa-lg"></i> Traffic path
              </a>
            </li>
            <li>
              <a href="{{ url_for('control_path') }}">
                <i class="fa fa-rocket fa-fw fa-lg"></i> Control path
              </a>
            </li>
          </ul>
        </li>
      </ul>


    </div><!-- /.navbar-collapse -->
  </nav>

  <div id="page-wrapper">

    {{ print_flash_messages()|safe }}

    {% block page %}
    {% endblock %}

  </div><!-- /#page-wrapper -->

</div><!-- /#wrapper -->

{% endblock %}
